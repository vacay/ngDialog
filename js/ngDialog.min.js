/*! ng-dialog - v0.3.12 (https://github.com/likeastore/ngDialog) */
!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require("angular")):"function"==typeof define&&define.amd?define(["angular"],b):b(a.angular)}(this,function(a,b){"use strict";var c=a.module("ngDialog",[]),d=a.element,e=a.isDefined,f=(document.body||document.documentElement).style,g=e(f.animation)||e(f.WebkitAnimation)||e(f.MozAnimation)||e(f.MsAnimation)||e(f.OAnimation),h="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",i="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",j=!1,k={};return c.provider("ngDialog",function(){var b=this.defaults={className:"ngdialog-theme-default",plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,closeByNavigation:!1,appendTo:!1,preCloseCallback:!1,overlay:!0,cache:!0,trapFocus:!0,preserveFocus:!0,ariaAuto:!0,ariaRole:null,ariaLabelledById:null,ariaLabelledBySelector:null,ariaDescribedById:null,ariaDescribedBySelector:null};this.setForceBodyReload=function(a){j=a||!1},this.setDefaults=function(c){a.extend(b,c)};var c,e=0,f=0,l={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(m,n,o,p,q,r,s,t,u,v){var w=m.find("body");j&&r.$on("$locationChangeSuccess",function(){w=m.find("body")});var x={onDocumentKeydown:function(a){27===a.keyCode&&y.close("$escape")},activate:function(a){var b=a.data("$ngDialogOptions");b.trapFocus&&(a.on("keydown",x.onTrapFocusKeydown),w.on("keydown",x.onTrapFocusKeydown))},deactivate:function(a){a.off("keydown",x.onTrapFocusKeydown),w.off("keydown",x.onTrapFocusKeydown)},deactivateAll:function(b){a.forEach(function(b){var c=a.element(b);x.deactivate(c)})},setBodyPadding:function(a){var b=parseInt(w.css("padding-right")||0,10);w.css("padding-right",b+a+"px"),w.data("ng-dialog-original-padding",b)},resetBodyPadding:function(){var a=w.data("ng-dialog-original-padding");a?w.css("padding-right",a+"px"):w.css("padding-right","")},performCloseDialog:function(a,b){var d=a.attr("id"),e=k[d];if("undefined"!=typeof t.Hammer){var i=e.hammerTime;i.off("tap",c),i.destroy&&i.destroy(),delete e.hammerTime}else a.unbind("click");1===f&&w.unbind("keydown"),a.hasClass("ngdialog-closing")||(f-=1);var j=a.data("$ngDialogPreviousFocus");j&&j.focus(),r.$broadcast("ngDialog.closing",a),f=0>f?0:f,g?(e.$destroy(),a.unbind(h).bind(h,function(){a.remove(),0===f&&(w.removeClass("ngdialog-open"),x.resetBodyPadding()),r.$broadcast("ngDialog.closed",a)}).addClass("ngdialog-closing")):(e.$destroy(),a.remove(),0===f&&(w.removeClass("ngdialog-open"),x.resetBodyPadding()),r.$broadcast("ngDialog.closed",a)),l[d]&&(l[d].resolve({id:d,value:b,$dialog:a,remainingDialogs:f}),delete l[d]),k[d]&&delete k[d]},closeDialog:function(b,c){var d=b.data("$ngDialogPreCloseCallback");if(d&&a.isFunction(d)){var e=d.call(b,c);a.isObject(e)?e.closePromise?e.closePromise.then(function(){x.performCloseDialog(b,c)}):e.then(function(){x.performCloseDialog(b,c)},function(){}):e!==!1&&x.performCloseDialog(b,c)}else x.performCloseDialog(b,c)},onTrapFocusKeydown:function(b){var c,d=a.element(b.currentTarget);if(d.hasClass("ngdialog"))c=d;else if(c=x.getActiveDialog(),null===c)return;var e=9===b.keyCode,f=b.shiftKey===!0;e&&x.handleTab(c,b,f)},handleTab:function(a,b,c){var d=x.getFocusableElements(a);if(0===d.length)return void(document.activeElement&&document.activeElement.blur());var e=document.activeElement,f=Array.prototype.indexOf.call(d,e),g=-1===f,h=0===f,i=f===d.length-1,j=!1;c?(g||h)&&(d[d.length-1].focus(),j=!0):(g||i)&&(d[0].focus(),j=!0),j&&(b.preventDefault(),b.stopPropagation())},autoFocus:function(a){var b=a[0],c=b.querySelector("*[autofocus]");if(null===c||(c.focus(),document.activeElement!==c)){var e=x.getFocusableElements(a);if(e.length>0)return void e[0].focus();var f=x.filterVisibleElements(b.querySelectorAll("h1,h2,h3,h4,h5,h6,p,span"));if(f.length>0){var g=f[0];d(g).attr("tabindex","0"),g.focus()}}},getFocusableElements:function(a){var b=a[0],c=b.querySelectorAll(i);return x.filterVisibleElements(c)},filterVisibleElements:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];(d.offsetWidth>0||d.offsetHeight>0)&&b.push(d)}return b},getActiveDialog:function(){var a=document.querySelectorAll(".ngdialog");return 0===a.length?null:d(a[a.length-1])},applyAriaAttributes:function(a,b){if(b.ariaAuto){if(!b.ariaRole){var c=x.getFocusableElements(a).length>0?"dialog":"alertdialog";b.ariaRole=c}b.ariaLabelledBySelector||(b.ariaLabelledBySelector="h1,h2,h3,h4,h5,h6"),b.ariaDescribedBySelector||(b.ariaDescribedBySelector="article,section,p")}b.ariaRole&&a.attr("role",b.ariaRole),x.applyAriaAttribute(a,"aria-labelledby",b.ariaLabelledById,b.ariaLabelledBySelector),x.applyAriaAttribute(a,"aria-describedby",b.ariaDescribedById,b.ariaDescribedBySelector)},applyAriaAttribute:function(a,b,c,e){if(c&&a.attr(b,c),e){var f=a.attr("id"),g=a[0].querySelector(e);if(!g)return;var h=f+"-"+b;return d(g).attr("id",h),a.attr(b,h),h}}},y={open:function(g){function h(a,b){return q.get(a,b||{}).then(function(a){return a.data||""})}function i(b){return b?a.isString(b)&&j.plain?b:"boolean"!=typeof j.cache||j.cache?n.get(b)||h(b,{cache:!0}):h(b,{cache:!1}):"Empty template"}var j=a.copy(b),m=++e,z="ngdialog"+m;g=g||{},a.extend(j,g);var A;l[z]=A=p.defer();var B;k[z]=B=a.isObject(j.scope)?j.scope.$new():r.$new();var C,D,E=a.extend({},j.resolve);return a.forEach(E,function(b,c){E[c]=a.isString(b)?v.get(b):v.invoke(b,null,null,c)}),p.all({template:i(j.template||j.templateUrl),locals:p.all(E)}).then(function(b){var e=b.template,g=b.locals;if(n.put(j.template||j.templateUrl,e),j.showClose&&(e+='<div class="ngdialog-close"></div>'),C=d('<div id="ngdialog'+m+'" class="ngdialog"></div>'),C.html(j.overlay?'<div class="ngdialog-overlay"></div><div class="ngdialog-content" role="document">'+e+"</div>":'<div class="ngdialog-content" role="document">'+e+"</div>"),C.data("$ngDialogOptions",j),j.data&&a.isString(j.data)){var h=j.data.replace(/^\s*/,"")[0];B.ngDialogData="{"===h||"["===h?a.fromJson(j.data):j.data}else j.data&&a.isObject(j.data)&&(B.ngDialogData=j.data);if(j.controller&&(a.isString(j.controller)||a.isArray(j.controller)||a.isFunction(j.controller))){var i=j.controller;j.controllerAs&&a.isString(j.controllerAs)&&(i+=" as "+j.controllerAs);var k=u(j.controller,a.extend(g,{$scope:B,$element:C}));C.data("$ngDialogControllerController",k)}if(j.className&&C.addClass(j.className),D=j.appendTo&&a.isString(j.appendTo)?a.element(document.querySelector(j.appendTo)):w,x.applyAriaAttributes(C,j),j.preCloseCallback){var l;a.isFunction(j.preCloseCallback)?l=j.preCloseCallback:a.isString(j.preCloseCallback)&&B&&(a.isFunction(B[j.preCloseCallback])?l=B[j.preCloseCallback]:B.$parent&&a.isFunction(B.$parent[j.preCloseCallback])?l=B.$parent[j.preCloseCallback]:r&&a.isFunction(r[j.preCloseCallback])&&(l=r[j.preCloseCallback])),l&&C.data("$ngDialogPreCloseCallback",l)}if(B.closeThisDialog=function(a){x.closeDialog(C,a)},j.style&&"object"==typeof j.style)for(var p in j.style)j.style.hasOwnProperty(p)&&(C[0].style[p]=j.style[p]);if(s(function(){var a=document.querySelectorAll(".ngdialog");x.deactivateAll(a),o(C)(B);var b=t.innerWidth-w.prop("clientWidth");w.addClass("ngdialog-open");var c=b-(t.innerWidth-w.prop("clientWidth"));c>0&&x.setBodyPadding(c),D.append(C),x.activate(C),j.trapFocus&&x.autoFocus(C),j.name?r.$broadcast("ngDialog.opened",{dialog:C,name:j.name}):r.$broadcast("ngDialog.opened",C)}),j.closeByEscape&&w.bind("keydown",x.onDocumentKeydown),j.closeByNavigation&&r.$on("$locationChangeSuccess",function(){x.closeDialog(C)}),j.preserveFocus&&C.data("$ngDialogPreviousFocus",document.activeElement),c=function(a){var b=j.closeByDocument?d(a.target).hasClass("ngdialog-overlay"):!1,c=d(a.target).hasClass("ngdialog-close");(b||c)&&y.close(C.attr("id"),c?"$closeButton":"$document")},"undefined"!=typeof t.Hammer){var q=B.hammerTime=t.Hammer(C[0]);q.on("tap",c)}else C.bind("click",c);return f+=1,y}),{id:z,closePromise:A.promise,close:function(a){x.closeDialog(C,a)}}},openConfirm:function(b){var c=p.defer(),e={closeByEscape:!1,closeByDocument:!1};a.extend(e,b),e.scope=a.isObject(e.scope)?e.scope.$new():r.$new(),e.scope.confirm=function(a){c.resolve(a);var b=d(document.getElementById(f.id));x.performCloseDialog(b,a)};var f=y.open(e);return f.closePromise.then(function(a){return a?c.reject(a.value):c.reject()}),c.promise},isOpen:function(a){var b=d(document.getElementById(a));return b.length>0},close:function(a,b){var c=d(document.getElementById(a));return c.length?x.closeDialog(c,b):y.closeAll(b),y},closeAll:function(a){for(var b=document.querySelectorAll(".ngdialog"),c=b.length-1;c>=0;c--){var e=b[c];x.closeDialog(d(e),a)}},getDefaults:function(){return b}};return y}]}),c.directive("ngDialog",["ngDialog",function(b){return{restrict:"A",scope:{ngDialogScope:"="},link:function(c,d,e){d.on("click",function(d){d.preventDefault();var f=a.isDefined(c.ngDialogScope)?c.ngDialogScope:"noScope";a.isDefined(e.ngDialogClosePrevious)&&b.close(e.ngDialogClosePrevious);var g=b.getDefaults();b.open({template:e.ngDialog,className:e.ngDialogClass||g.className,controller:e.ngDialogController,controllerAs:e.ngDialogControllerAs,scope:f,data:e.ngDialogData,showClose:"false"===e.ngDialogShowClose?!1:"true"===e.ngDialogShowClose?!0:g.showClose,closeByDocument:"false"===e.ngDialogCloseByDocument?!1:"true"===e.ngDialogCloseByDocument?!0:g.closeByDocument,closeByEscape:"false"===e.ngDialogCloseByEscape?!1:"true"===e.ngDialogCloseByEscape?!0:g.closeByEscape,preCloseCallback:e.ngDialogPreCloseCallback||g.preCloseCallback})})}}}]),c});